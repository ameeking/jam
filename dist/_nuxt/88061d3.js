(window.webpackJsonp=window.webpackJsonp||[]).push([[9],{342:function(e,t,n){"use strict";var o=n(76),r={name:"CardProduct",components:{Card:o.c,Chip:o.d,Button:o.b},props:["id","name","description","image","categories"],data:function(){return{border:!0}},computed:{imagePath:function(){return"http://localhost:1337".concat(this.image.url)},link:function(){return"/product/".concat(this.id)}},methods:{categoryHref:function(e){return"/category/".concat(e)}}},c=n(6),component=Object(c.a)(r,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("Card",{attrs:{image:e.imagePath,border:e.border,scale:"16:9"}},[n("template",{slot:"content"},[n("div",e._l(e.categories,(function(t){return n("Chip",{key:t.id,attrs:{href:e.categoryHref(t.id)}},[e._v("\n        "+e._s(t.name)+"\n      ")])})),1),e._v(" "),n("h3",{staticClass:"u-mb--0 u-mt--1"},[e._v(e._s(e.name))]),e._v(" "),n("p",[e._v(e._s(e.description))]),e._v(" "),n("Button",{staticClass:"u-mt--auto",attrs:{href:e.link,type:"primary"}},[e._v("View product")])],1)],2)}),[],!1,null,null,null);t.a=component.exports},345:function(e,t){var n={kind:"Document",definitions:[{kind:"OperationDefinition",operation:"query",name:{kind:"Name",value:"Products"},variableDefinitions:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"products"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"name"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"description"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"image"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"url"},arguments:[],directives:[]}]}},{kind:"Field",name:{kind:"Name",value:"categories"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"name"},arguments:[],directives:[]}]}},{kind:"Field",name:{kind:"Name",value:"locations"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"name"},arguments:[],directives:[]}]}}]}}]}}],loc:{start:0,end:180}};n.loc.source={body:"query Products {\n  products {\n    id\n    name\n    description\n    image {\n      url\n    }\n    categories {\n      id\n      name\n    }\n    locations {\n      id\n      name\n    }\n  }\n}",name:"GraphQL request",locationOffset:{line:1,column:1}};var o={};function r(e,t){for(var i=0;i<e.definitions.length;i++){var element=e.definitions[i];if(element.name&&element.name.value==t)return element}}n.definitions.forEach((function(e){if(e.name){var t=new Set;!function e(t,n){if("FragmentSpread"===t.kind)n.add(t.name.value);else if("VariableDefinition"===t.kind){var o=t.type;"NamedType"===o.kind&&n.add(o.name.value)}t.selectionSet&&t.selectionSet.selections.forEach((function(t){e(t,n)})),t.variableDefinitions&&t.variableDefinitions.forEach((function(t){e(t,n)})),t.definitions&&t.definitions.forEach((function(t){e(t,n)}))}(e,t),o[e.name.value]=t}})),e.exports=n,e.exports.Products=function(e,t){var n={kind:e.kind,definitions:[r(e,t)]};e.hasOwnProperty("loc")&&(n.loc=e.loc);var c=o[t]||new Set,d=new Set,l=new Set;for(c.forEach((function(e){l.add(e)}));l.size>0;){var m=l;l=new Set,m.forEach((function(e){d.has(e)||(d.add(e),(o[e]||new Set).forEach((function(e){l.add(e)})))}))}return d.forEach((function(t){var o=r(e,t);o&&n.definitions.push(o)})),n}(n,"Products")},353:function(e,t,n){"use strict";n.r(t);n(56),n(43),n(77),n(223),n(158),n(37),n(113),n(44);var o=n(345),r=n.n(o),c=n(342),d=n(76),l={name:"products",components:{CardProduct:c.a,Grid:d.e,GridCol:d.f},data:function(){return{products:[],categoriesModel:[],locationsModel:[],query:""}},apollo:{products:{prefetch:!0,query:r.a}},methods:{matchesCategoriesModel:function(e){return-1!==this.categoriesModel.indexOf(e.id)||0===this.categoriesModel.length},matchesLocationsModel:function(e){return-1!==this.locationsModel.indexOf(e.id)||0===this.locationsModel.length}},computed:{filteredProducts:function(){var e=this;return this.products.filter((function(t){return t.name.toLowerCase().includes(e.query.toLowerCase())&&t.categories.some(e.matchesCategoriesModel)&&t.locations.some(e.matchesLocationsModel)}))},categories:function(){var e={};return this.filteredProducts.forEach((function(t){t.categories.forEach((function(t){e[t.id]=t}))})),e},locations:function(){var e={};return this.filteredProducts.forEach((function(t){t.locations.forEach((function(t){e[t.id]=t}))})),e}},mounted:function(){this.$store.commit("page/setTitle","Search"),this.$store.commit("page/setBanner","")}},m=n(6),component=Object(m.a)(l,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"l-container"},[n("form",{staticClass:"u-mb--5"},[n("input",{directives:[{name:"model",rawName:"v-model",value:e.query,expression:"query"}],attrs:{type:"search",placeholder:"Search..."},domProps:{value:e.query},on:{input:function(t){t.target.composing||(e.query=t.target.value)}}})]),e._v(" "),n("Grid",[n("GridCol",{attrs:{xs:"3"}},[n("strong",[e._v("Category")]),e._v(" "),e._l(e.categories,(function(t){return n("div",{key:t.id},[n("input",{directives:[{name:"model",rawName:"v-model",value:e.categoriesModel,expression:"categoriesModel"}],attrs:{type:"checkbox",id:"cat-"+t.id},domProps:{value:t.id,checked:Array.isArray(e.categoriesModel)?e._i(e.categoriesModel,t.id)>-1:e.categoriesModel},on:{change:function(n){var o=e.categoriesModel,r=n.target,c=!!r.checked;if(Array.isArray(o)){var d=t.id,l=e._i(o,d);r.checked?l<0&&(e.categoriesModel=o.concat([d])):l>-1&&(e.categoriesModel=o.slice(0,l).concat(o.slice(l+1)))}else e.categoriesModel=c}}}),e._v(" "),n("label",{attrs:{for:"cat-"+t.id}},[e._v(e._s(t.name))])])})),e._v(" "),n("strong",{staticClass:"u-mt--4"},[e._v("Location")]),e._v(" "),e._l(e.locations,(function(t){return n("div",{key:t.id},[n("input",{directives:[{name:"model",rawName:"v-model",value:e.locationsModel,expression:"locationsModel"}],attrs:{type:"checkbox",id:t.id},domProps:{value:t.id,checked:Array.isArray(e.locationsModel)?e._i(e.locationsModel,t.id)>-1:e.locationsModel},on:{change:function(n){var o=e.locationsModel,r=n.target,c=!!r.checked;if(Array.isArray(o)){var d=t.id,l=e._i(o,d);r.checked?l<0&&(e.locationsModel=o.concat([d])):l>-1&&(e.locationsModel=o.slice(0,l).concat(o.slice(l+1)))}else e.locationsModel=c}}}),e._v(" "),n("label",{attrs:{for:t.id}},[e._v(e._s(t.name))])])}))],2),e._v(" "),n("GridCol",{attrs:{xs:"9"}},[n("Grid",e._l(e.filteredProducts,(function(e){return n("GridCol",{key:e.id,attrs:{xs:"4"}},[n("CardProduct",{attrs:{name:e.name,id:e.id,image:e.image,description:e.description,categories:e.categories}})],1)})),1)],1)],1)],1)}),[],!1,null,null,null);t.default=component.exports}}]);